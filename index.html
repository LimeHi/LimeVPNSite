<script>
    async function fetchIP() {
        const display = document.getElementById('ip-display');
        
        // Список надежных API
        const services = [
            'https://api.ipify.org?format=json',
            'https://ipapi.co/json/',
            'https://ipinfo.io/json'
        ];

        for (let url of services) {
            try {
                const response = await fetch(url);
                if (!response.ok) continue; // Если этот сервис подвел, пробуем следующий
                
                const data = await response.json();
                display.textContent = data.ip;
                display.style.color = '#007bff'; // Возвращаем синий цвет при успехе
                return; // Успешно получили IP, выходим из цикла
            } catch (e) {
                console.warn(`Сервис ${url} недоступен, пробуем следующий...`);
            }
        }

        // Если ни один сервис не ответил
        display.style.color = 'red';
        display.textContent = 'Ошибка: проверьте интернет или выключите VPN';
    }

    window.onload = fetchIP;
</script>
