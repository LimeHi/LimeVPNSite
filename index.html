<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>Ваш IP-адрес. Узнать IP адрес, определить IP-адрес</title>
    <style type="text/css">
        * { padding:0; margin:0; }
        body { font-family: Arial, sans-serif; background-color: #fff; }
        table { border-collapse:collapse; width:100%; }
        a { color:#888888; text-decoration: none; }
        a:hover { text-decoration: underline; }
        
        .container { 
            position:relative; 
            width:500px; 
            margin-left:-250px; 
            left:50%; 
            top:60px; 
        }
        
        table.network-info td, table.network-info th { 
            border:solid 1px #43AA2E; 
            padding:10px; 
            text-align:center; 
        }
        
        table.network-info th { 
            background-color:#E0EED3; 
            font-size: 14px;
            font-weight: bold;
        }

        .data-value {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .geo-text {
            font-size: 13px;
            color: #666;
        }

        .copy { padding:15px 10px 5px; font-size:14px; color:#888888; text-align: left; }
        .promo { text-align:center; padding:20px; line-height:25px; font-size: 13px; }
        .promo > a { color:#0055aa; }
    </style>
</head>
<body>

    <div class="container">
        <div id="ipcontent">
            <table class="network-info">
                <tbody>
                    <tr><th>Ваш IP-адрес</th></tr>
                    <tr>
                        <td class="data-value" id="user-ip">Определение...</td>
                    </tr>
                    <tr><th>Имя вашего хоста / Провайдер</th></tr>
                    <tr>
                        <td id="user-host">Загрузка данных...</td>
                    </tr>
                    <tr><th>Местоположение</th></tr>
                    <tr>
                        <td class="geo-text" id="user-geo">Определение города и страны...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="copy">
            <a href="#">Ваш Сайт</a>&nbsp;<sup>©</sup>&nbsp;2026
        </div>
        
        <div class="promo">
            <a href="#">Получить IP-адреса и автономную систему</a><br>
            <a href="#">Услуги цифрового телевидения</a>
        </div>
    </div>

    <script>
        async function getMyIPData() {
            const ipField = document.getElementById('user-ip');
            const hostField = document.getElementById('user-host');
            const geoField = document.getElementById('user-geo');

            try {
                // Используем надежный API для получения всех данных сразу
                const response = await fetch('https://ipapi.co/json/');
                if (!response.ok) throw new Error();
                
                const data = await response.json();

                // Заполняем таблицу данными
                ipField.innerText = data.ip;
                hostField.innerText = data.org || "Данные не предоставлены";
                geoField.innerText = `${data.city}, ${data.country_name}`;
                
            } catch (error) {
                // Если первый сервис не сработал, пробуем резервный
                try {
                    const resAlt = await fetch('https://ipwho.is/');
                    const dataAlt = await resAlt.json();
                    
                    ipField.innerText = dataAlt.ip;
                    hostField.innerText = dataAlt.connection.isp;
                    geoField.innerText = `${dataAlt.city}, ${dataAlt.country}`;
                } catch (e) {
                    ipField.innerText = "Ошибка";
                    hostField.innerText = "Не удалось определить провайдера";
                    geoField.innerText = "Не удалось определить геопозицию";
                }
            }
        }

        // Запуск при загрузке страницы
        window.onload = getMyIPData;
    </script>

</body>
</html>
